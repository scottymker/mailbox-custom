<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Success â€¢ Mailbox Customizer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@400;500;600&family=Lora:wght@500;600&family=Merriweather:wght@600&family=Montserrat:wght@500;600&family=Oswald:wght@500&family=Playfair+Display:wght@600&family=Poppins:wght@600;700&family=Roboto+Slab:wght@500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css"/>
  <script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
</head>
<body class="success-body">
  <main class="success-wrap">
    <div class="card success-card">
      <div class="success-mark">
        <i data-lucide="badge-check" aria-hidden="true"></i>
      </div>
      <h1 class="success-title">Thank you, <span id="customer-name">valued customer</span>!</h1>
      <p class="success-sub">
        Your design has been added to your cart. Here's a preview of your customized mailbox:
      </p>

      <div class="success-preview">
        <img src="mailbox52.jpg" alt="Your customized mailbox" class="success-mailbox-img"/>
        <div class="success-decal-text success-top" id="preview-success-top">1234 Bourbon Drive</div>
        <div class="success-decal-text success-bottom" id="preview-success-bottom">The Andersons</div>
      </div>

      <p class="success-note">This design is saved in your cart. Complete your order to have it made!</p>

      <div class="success-actions">
        <a href="https://www.walldecorplusmore.com" class="btn ghost" id="continue-shopping">
          <i data-lucide="arrow-left"></i>
          <span>Continue Shopping</span>
        </a>
        <a href="https://www.walldecorplusmore.com/cart.php" class="btn" id="view-cart">
          <i data-lucide="shopping-cart"></i>
          <span>View Cart & Checkout</span>
        </a>
      </div>
    </div>
  </main>
  <script>
    const params = new URLSearchParams(location.search);
    const read = key => {
      const value = params.get(key);
      return value && value.trim().length ? value.trim() : null;
    };
    const getBool = key => params.get(key) === 'true';
    const topLine = read('top') || '1234 Bourbon Drive';
    const bottomLine = read('bottom') || 'The Andersons';
    const font = read('font') || "Poppins, Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif";
    const colorHex = read('color') || '#fdfbfb';
    const topCaps = getBool('topCaps');
    const bottomCaps = getBool('bottomCaps');
    const topSize = read('topSize') || '20';
    const bottomSize = read('bottomSize') || '20';
    const topX = read('topX') || '50';
    const topY = read('topY') || '32';
    const bottomX = read('bottomX') || '50';
    const bottomY = read('bottomY') || '74';

    // Set customer name
    document.getElementById('customer-name').textContent = bottomLine;

    // Apply design to preview
    const topPreview = document.getElementById('preview-success-top');
    const bottomPreview = document.getElementById('preview-success-bottom');

    topPreview.textContent = topCaps ? topLine.toUpperCase() : topLine;
    bottomPreview.textContent = bottomCaps ? bottomLine.toUpperCase() : bottomLine;

    topPreview.style.fontFamily = font;
    topPreview.style.color = colorHex;
    topPreview.style.fontSize = topSize + 'px';
    topPreview.style.left = topX + '%';
    topPreview.style.top = topY + '%';

    bottomPreview.style.fontFamily = font;
    bottomPreview.style.color = colorHex;
    bottomPreview.style.fontSize = bottomSize + 'px';
    bottomPreview.style.left = bottomX + '%';
    bottomPreview.style.top = bottomY + '%';

    document.addEventListener('DOMContentLoaded', function(){
      if (window.lucide) { window.lucide.createIcons(); }
    });

    function simplifyFont(fontStack){
      if (!fontStack) return null;
      const alias = {
        'Poppins': 'Poppins',
        'Inter': 'Inter',
        'Montserrat': 'Montserrat',
        'Lora': 'Lora',
        'Merriweather': 'Merriweather',
        'Playfair Display': 'Playfair Display',
        'Great Vibes': 'Great Vibes',
        'Roboto Slab': 'Roboto Slab',
        'Oswald': 'Oswald'
      };
      const parts = fontStack.split(',');
      const primary = parts.length ? parts[0].trim().replace(/['"]/g, '') : null;
      return alias[primary] || primary || null;
    }

    function mapColor(hex){
      if (!hex) return null;
      const normalized = hex.toLowerCase();
      const colors = {
        '#181820': 'Black',
        '#d2c3a3': 'Beige',
        '#6f263d': 'Burgendy',
        '#f4c3cc': 'Carnation Pink',
        '#babd8b': 'Celedon',
        '#4e3629': 'Chocolate Brown',
        '#353f63': 'Deep Blue',
        '#77c5d5': 'Geyser',
        '#d13f78': 'Hot Pink',
        '#48a6d4': 'Ice Blue',
        '#c2e189': 'Key Lime',
        '#bf94be': 'Lilac',
        '#6fab44': 'Lime Green',
        '#c92866': 'Lipstick',
        '#826d43': 'Metallic Gold',
        '#808284': 'Metallic Silver',
        '#9b945f': 'Olive Green',
        '#f36122': 'Orange',
        '#ff7321': 'Pastel Orange',
        '#6a4474': 'Plum',
        '#836baa': 'Purple',
        '#a5222d': 'Red',
        '#f68cb8': 'Soft Pink',
        '#798284': 'Storm Grey',
        '#b08d67': 'Tan',
        '#008595': 'Teal',
        '#006bb5': 'Traffic Blue',
        '#009fa0': 'Turquoise',
        '#cbc4bc': 'Warm Grey',
        '#fdfbfb': 'White',
        '#ffca17': 'Yellow',
        '#a0927d': 'Tumbleweed',
        '#e0e0e0': 'Light Gray',
        '#8eb3c9': 'Misty Blue',
        '#94cbce': 'BeachHouse',
        '#6ddbc7': 'Mint',
        '#6d4f58': 'Eggplant',
        '#99355c': 'Berry',
        '#c9853c': 'Rust Orange',
        '#ffe98f': 'Buttercream',
        '#e8a72e': 'Honey',
        '#ed7b62': 'Coral',
        '#d60718': 'Cherry Red'
      };
      return colors[normalized] || normalized;
    }

  </script>
</body>
</html>
