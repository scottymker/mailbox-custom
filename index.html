<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mailbox Customizer</title>

<!-- Google Fonts for the Font dropdown -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Playfair+Display:wght@500;700&family=Domine:wght@400;700&family=Raleway:wght@400;700&family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --brand:#ad8771;         /* primary + accent */
    --ink:#202738;           /* text */
    --bg:#fafafd;            /* background */
    --muted:#bababa;         /* secondary */
    --radius:18px;
    --shadow:0 10px 30px rgba(32,39,56,.12);
    --decal:#ffffff;         /* starting decal color (drives text fill) */
    --decal-ink:#111111;     /* computed contrast color for strokes/badges */
  }

  html,body{height:100%;}
  body{
    margin:0;
    font-family: Montserrat, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    color:var(--ink);
    background:
      radial-gradient(1200px 600px at -10% -10%, rgba(173,135,113,.20), transparent 60%),
      radial-gradient(900px 450px at 110% 120%, rgba(173,135,113,.18), transparent 60%),
      var(--bg);
    line-height:1.45;
  }

  .wrap{max-width:1100px;margin:auto;padding:28px;}
  .nav{
    display:flex;align-items:center;gap:14px;justify-content:space-between;margin-bottom:18px
  }
  .logo{
    display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px
  }
  .logo-badge{width:34px;height:34px;border-radius:10px;background:var(--brand);
    display:grid;place-items:center;color:white;box-shadow:0 6px 18px rgba(173,135,113,.45)}
  .pill{
    display:inline-flex;align-items:center;gap:8px;
    padding:10px 14px;border-radius:999px;background:white;box-shadow:var(--shadow);
    border:1px solid rgba(0,0,0,.06); color:#3a3f4a; text-decoration:none; font-weight:600;
  }

  .hero{
    display:grid;gap:22px;align-items:start;
    grid-template-columns: 1.15fr .95fr;
    background:white;border-radius:var(--radius);box-shadow:var(--shadow);
    border:1px solid rgba(0,0,0,.06); padding:20px;
  }
  @media (max-width:980px){
    .hero{grid-template-columns: 1fr}
  }

  /* Canvas */
  .stage{
    border-radius:14px;overflow:hidden;position:relative;background:#eee;isolation:isolate;
    border:1px solid rgba(0,0,0,.06);
  }
  .stage img{display:block;width:100%;height:auto}
  .overlay{
    position:absolute;inset:0;pointer-events:none; /* preview text not draggable (simple build) */
    display:flex;flex-direction:column;justify-content:center;align-items:flex-start;
    padding: clamp(12px, 3vw, 30px);
    gap: clamp(8px, 1.8vw, 16px);
    transform: perspective(1000px) rotateY(-2.2deg); /* slight angle to match mailbox face */
  }

  .line{
    --size: clamp(18px, 3.6vw, 34px);      /* responsive size without wrapping chaos */
    font-size: var(--size);
    font-weight: 800;
    letter-spacing:.4px;
    color: var(--decal);                   /* live “decal” fill */
    text-shadow:
      0 1px 0 rgba(0,0,0,.08),
      0 2px 12px rgba(0,0,0,.18);
    -webkit-text-stroke: 1.2px var(--decal-ink); /* crisp edge on any background */
    paint-order: stroke fill;
    max-width: 82%;
    line-height: 1.15;
    white-space: nowrap;
  }
  .line.small{ --size: clamp(14px, 2.6vw, 24px); font-weight:700; }

  /* Optional capsule backdrop to boost contrast on very light mailboxes */
  .capsule{
    background: color-mix(in srgb, var(--decal-ink) 14%, transparent);
    backdrop-filter: blur(1px);
    padding: .20em .48em;
    border-radius: 10px;
  }

  /* Controls */
  .panel{
    display:grid;gap:14px;background:linear-gradient(180deg, #fff, #fbfbff);
    border-radius:var(--radius);box-shadow:var(--shadow);
    border:1px solid rgba(0,0,0,.06);padding:18px
  }
  .field{display:grid;gap:8px}
  .label{font-size:.92rem;font-weight:700;color:#2c3342}
  .input, .select{
    appearance:none;border:1px solid #e6e8ef;background:white;border-radius:12px;
    padding:12px 14px;font-size:15px;outline:none;
    transition:border .15s ease, box-shadow .15s ease;
  }
  .input:focus, .select:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(173,135,113,.18)}
  .swatch-row{display:flex;gap:8px;flex-wrap:wrap}
  .sw{width:32px;height:28px;border-radius:9px;border:2px solid white;box-shadow:0 3px 12px rgba(0,0,0,.15);cursor:pointer}
  .note{font-size:.86rem;color:#5a6272}

  .credit{display:flex;justify-content:center;margin-top:26px}
</style>
</head>
<body>

  <div class="wrap">
    <header class="nav">
      <div class="logo">
        <span class="logo-badge">✉️</span>
        <span>Mailbox Customizer</span>
      </div>
      <a class="pill" href="#" onclick="event.preventDefault()">Submit your options →</a>
    </header>

    <section class="hero">
      <!-- LEFT: Live Preview -->
      <div class="stage">
        <!-- Replace src with your actual image path if needed -->
        <img src="/mnt/data/mailbox52.jpg" alt="Mailbox" onerror="this.src='https://images.unsplash.com/photo-1485470733090-0aae1788d5af?q=80&w=1600&auto=format&fit=crop';">
        <div id="overlay" class="overlay">
          <div id="lineTop" class="line capsule">410 Cedar Ridge</div>
          <div id="lineBottom" class="line small capsule">The Johnson Family</div>
        </div>
      </div>

      <!-- RIGHT: Controls -->
      <div class="panel">
        <div class="field">
          <label class="label" for="topText">Top line</label>
          <input id="topText" class="input" type="text" placeholder="Enter street number & name" value="410 Cedar Ridge" />
        </div>

        <div class="field">
          <label class="label" for="bottomText">Bottom line</label>
          <input id="bottomText" class="input" type="text" placeholder="Enter family name or message" value="The Johnson Family" />
        </div>

        <div class="field">
          <label class="label" for="fontPick">Font</label>
          <select id="fontPick" class="select">
            <option value="'Montserrat',sans-serif" selected>Montserrat (modern, bold)</option>
            <option value="'Raleway',sans-serif">Raleway (clean)</option>
            <option value="'Playfair Display',serif">Playfair Display (elegant serif)</option>
            <option value="'Domine',serif">Domine (classic serif)</option>
            <option value="'Libre Baskerville',serif">Libre Baskerville (heritage)</option>
          </select>
        </div>

        <div class="field">
          <div class="label">Decal color (affects text fill)</div>
          <div class="swatch-row" id="swatches">
            <button class="sw" style="background:#ffffff" data-color="#ffffff" title="White"></button>
            <button class="sw" style="background:#e7e2dd" data-color="#e7e2dd" title="Cream"></button>
            <button class="sw" style="background:#ad8771" data-color="#ad8771" title="Tan"></button>
            <button class="sw" style="background:#6d6d6d" data-color="#6d6d6d" title="Gray"></button>
            <button class="sw" style="background:#2a2a2a" data-color="#2a2a2a" title="Black"></button>
            <button class="sw" style="background:#c94b3d" data-color="#c94b3d" title="Barn Red"></button>
          </div>
        </div>

        <p class="note">Live preview aims to match typical decal placement. Text size is responsive; edge strokes and a soft capsule boost readability on any mailbox finish.</p>
      </div>
    </section>

    <div class="credit">
      <span class="note">Need a print-ready proof or different layout (left/right side)? We can add those next.</span>
    </div>
  </div>

<script>
  const $ = s => document.querySelector(s);
  const lineTop = $('#lineTop');
  const lineBottom = $('#lineBottom');
  const overlay = $('#overlay');

  // Inputs
  $('#topText').addEventListener('input', e => {
    lineTop.textContent = e.target.value || ' ';
  });
  $('#bottomText').addEventListener('input', e => {
    lineBottom.textContent = e.target.value || ' ';
  });

  // Font change
  $('#fontPick').addEventListener('change', e => {
    lineTop.style.fontFamily = e.target.value;
    lineBottom.style.fontFamily = e.target.value;
  });

  // Swatches
  document.getElementById('swatches').addEventListener('click', e => {
    const btn = e.target.closest('.sw');
    if(!btn) return;
    const hex = btn.dataset.color;
    setDecalColor(hex);
  });

  function setDecalColor(hex){
    document.documentElement.style.setProperty('--decal', hex);
    // Compute high-contrast edge color & capsule tint
    const ink = idealTextColor(hex);        // black or white based on luminance
    document.documentElement.style.setProperty('--decal-ink', ink);
  }

  // Utility: compute luminance & pick contrasting color
  function idealTextColor(bg){
    // normalize
    const c = bg.replace('#','');
    const r = parseInt(c.substring(0,2),16);
    const g = parseInt(c.substring(2,4),16);
    const b = parseInt(c.substring(4,6),16);
    // Relative luminance (WCAG)
    const [R,G,B] = [r,g,b].map(v=>{
      v/=255;
      return v<=0.03928 ? v/12.92 : Math.pow((v+0.055)/1.055,2.4);
    });
    const L = 0.2126*R + 0.7152*G + 0.0722*B;
    return L > 0.5 ? '#111111' : '#ffffff';
  }

  // Initialize defaults
  setDecalColor(getComputedStyle(document.documentElement).getPropertyValue('--decal') || '#ffffff');

  // Optional: prevent long text from overflowing (it will shrink slightly)
  const resizeObserver = new ResizeObserver(() => fitText());
  resizeObserver.observe(overlay);

  function fitText(){
    [lineTop, lineBottom].forEach(el=>{
      const maxWidth = overlay.clientWidth * 0.82;
      el.style.whiteSpace = 'nowrap';
      let size = parseFloat(getComputedStyle(el).fontSize);
      while(el.scrollWidth > maxWidth && size > 10){
        size -= .5;
        el.style.fontSize = size + 'px';
      }
    });
  }
  fitText();
</script>
</body>
</html>
